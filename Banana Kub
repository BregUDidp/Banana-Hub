local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
 
game.StarterGui:SetCore("SendNotification", {
    Title = "🗺️ [ รันได้ทุกแมพ ] 🗺️",
    Text = "________________________________________________________",
    Duration = 10
})

game.StarterGui:SetCore("SendNotification", {
    Title = "[ สร้างโดย ] 💤 - XaS - 💤",
    Text = "________________________________________________________",
    Duration = 10
})

local Window = Rayfield:CreateWindow({
   Name = "  Mesui X Hub   .Premuim.   [ Zeus ]",
   Icon = "squirrel",
   LoadingTitle = "💤 Mesui X 💤 กำลังโหลด...",
   LoadingSubtitle = "____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________",
   ShowText = "💤",
   Theme = "Brown",

   ToggleUIKeybind = "F",

   DisableRayfieldPrompts = false,
   DisableBuildWarnings = false, -- Prevents Rayfield from warning when the script has a version mismatch with the interface

   ConfigurationSaving = {
      Enabled = true,
      FolderName = nil, -- Create a custom folder for your hub/game
      FileName = "Big Hub"
   },

   Discord = {
      Enabled = false, -- Prompt the user to join your Discord server if their executor supports it
      Invite = "noinvitelink", -- The Discord invite code, do not include discord.gg/. E.g. discord.gg/ ABCD would be ABCD
      RememberJoins = true -- Set this to false to make them join the discord every time they load it up
   },

   KeySystem = false,
   KeySettings = {
      Title = "",
      Subtitle = "",
      Note = "",
      FileName = "",
      SaveKey = false, -- The user's key will be saved, but if you change the key, they will be unable to use your script
      GrabKeyFromSite = false, -- If this is true, set Key below to the RAW site you would like Rayfield to get the key from
      Key = {"67"} -- List of keys that will be accepted by the system, can be RAW file links (pastebin, github etc) or simple strings ("hello","key22")
   }
})

local ESPTab = Window:CreateTab("Aimbot/ESP", "crosshair")
local Section = ESPTab:CreateSection("[🎯] โซนล็อคเป๋าหมายคน [🎯]")

local Players       = game:GetService("Players")
local LocalPlayer   = Players.LocalPlayer
local Camera        = workspace.CurrentCamera
local UserInput     = game:GetService("UserInputService")
local RunService    = game:GetService("RunService")

local fovEnabled = false
local fovRadius = 150
local fovThickness = 2
local fovSpeed = 0.6
local fovFollowMouse = false
local fovCircle = nil
local DrawingAvailable = (typeof(Drawing) == "table" and typeof(Drawing.new) == "function")

--// Rainbow Color
local function getRainbowColor(speed, offset)
    local hue = (tick() * (speed or 1) + (offset or 0)) % 1
    return Color3.fromHSV(hue, 1, 1)
end

--// Create FOV Circle
local function createFOVCircle()
    if not DrawingAvailable or fovCircle then return end
    fovCircle = Drawing.new("Circle")
    fovCircle.Visible = false
    fovCircle.Radius = fovRadius
    fovCircle.Thickness = fovThickness
    fovCircle.NumSides = 100
    fovCircle.Filled = false
    fovCircle.Transparency = 1
end

--// FOV Render
RunService.RenderStepped:Connect(function()
    if not fovEnabled or not fovCircle then
        if fovCircle then fovCircle.Visible = false end
        return
    end

    local pos
    if fovFollowMouse then
        local mouse = UserInput:GetMouseLocation()
        pos = Vector2.new(mouse.X, mouse.Y)
    else
        local size = Camera.ViewportSize
        pos = Vector2.new(size.X / 2, size.Y / 2)
    end

    fovCircle.Position = pos
    fovCircle.Radius = fovRadius
    fovCircle.Thickness = fovThickness
    fovCircle.Color = autoTarget and Color3.fromRGB(255, 0, 0) or getRainbowColor(fovSpeed)
    fovCircle.Visible = true
end)

--// Find Closest in FOV
local function GetClosestInFOV()
    local closest = nil
    local closestDist = math.huge
    local mousePos = UserInput:GetMouseLocation()
    local centerPos = fovFollowMouse and mousePos or Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)

    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("Head") then
            local humanoid = player.Character:FindFirstChild("Humanoid")
            if humanoid and humanoid.Health > 0 then
                local headPos = player.Character.Head.Position
                local screenPos, onScreen = Camera:WorldToViewportPoint(headPos)

                if onScreen then
                    local screenPoint = Vector2.new(screenPos.X, screenPos.Y)
                    local distToCenter = (screenPoint - centerPos).Magnitude

                    if distToCenter <= fovRadius then
                        local distToMouse = (screenPoint - mousePos).Magnitude
                        if distToMouse < closestDist then
                            closestDist = distToMouse
                            closest = player
                        end
                    end
                end
            end
        end
    end
    return closest
end

--// 🔥 SMOOTH AIMBOT TOGGLE (ด้านบนสุด)
ESPTab:CreateToggle({
    Name = "🎯 การล็อคเป๋าหมายคน [ .ต้องเปิดวงกลมก่อน. ]",
    CurrentValue = false,
    Callback = function(val)
        aimbotOn = val
        if not val then autoTarget = nil end
    end
})

--// Smooth Aimbot Toggle
ESPTab:CreateToggle({
    Name = "✨ การล็อคเป๋าหมายคนแบบลื่นๆ",
    CurrentValue = true,
    Callback = function(val)
        smoothEnabled = val
    end
})

--// Smooth Speed Slider
ESPTab:CreateSlider({
    Name = "⚡ ความเร็ว Smooth",
    Range = {1, 30},
    Increment = 1,
    CurrentValue = 8,
    Suffix = "x",
    Callback = function(val)
        smoothSpeed = 0.12 / (val / 8)  -- แปลง 1-30 → 0.22-0.03
    end
})

--// 🔥 SMOOTH AIMBOT LOOP (นุ่มนวล 100%)
RunService.RenderStepped:Connect(function()
    if aimbotOn and fovEnabled then
        autoTarget = GetClosestInFOV()
        
        if autoTarget and autoTarget.Character and autoTarget.Character:FindFirstChild("Head") then
            local targetPos = autoTarget.Character.Head.Position
            
            if smoothEnabled then
                -- 🔥 SMOOTH AIM: หมุนกล้องแบบนุ่มนวล
                local currentCFrame = Camera.CFrame
                local targetCFrame = CFrame.new(currentCFrame.Position, targetPos)
                Camera.CFrame = currentCFrame:lerp(targetCFrame, smoothSpeed)
            else
                -- Instant Aim
                Camera.CFrame = CFrame.new(Camera.CFrame.Position, targetPos)
            end
        end
    else
        autoTarget = nil
    end
end)

ESPTab:CreateSection("[🌀] โซนเปิดวงกลมตรงหน้าจอ [🌀]")

ESPTab:CreateToggle({
    Name = "🌀 เปิดวงกลม",
    CurrentValue = false,
    Callback = function(val)
        fovEnabled = val
        if val then createFOVCircle() end
    end
})

ESPTab:CreateToggle({
    Name = "🖱️ วงตามเมาส์",
    CurrentValue = false,
    Callback = function(val)
        fovFollowMouse = val
    end
})

ESPTab:CreateSlider({
    Name = "📏 ขนาดวงกลม",
    Range = {10, 1000},
    Increment = 1,
    CurrentValue = 150,
    Suffix = "px",
    Callback = function(val)
        fovRadius = val
        if fovCircle then fovCircle.Radius = val end
    end
})

ESPTab:CreateSlider({
    Name = "📏 ความหนาเส้น",
    Range = {1, 10},
    Increment = 1,
    CurrentValue = 2,
    Suffix = "px",
    Callback = function(val)
        fovThickness = val
        if fovCircle then fovCircle.Thickness = val end
    end
})

--// =================================== --
--//                ESP                 --
--// =================================== --

local espEnabled = false
local espTraceEnabled = true
local espBoxes = {}

local function rainbow(speed, offset)
    local t = tick() * (speed or 1) + (offset or 0)
    return Color3.fromHSV(t % 1, 1, 1)
end

local function createESP(player)
    if not DrawingAvailable or espBoxes[player] then return end
    local box = {}
    box.main = Drawing.new("Square")
    box.main.Thickness = 2
    box.main.Filled = false
    box.main.Visible = false

    box.name = Drawing.new("Text")
    box.name.Size = 16
    box.name.Center = true
    box.name.Outline = true
    box.name.Visible = false

    box.tracer = Drawing.new("Line")
    box.tracer.Thickness = 2
    box.tracer.Visible = false

    espBoxes[player] = box
end

local function removeESP(player)
    local box = espBoxes[player]
    if box then
        pcall(function()
            box.main:Remove()
            box.name:Remove()
            box.tracer:Remove()
        end)
        espBoxes[player] = nil
    end
end

RunService.RenderStepped:Connect(function()
    if not DrawingAvailable then return end

    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local humanoid = player.Character:FindFirstChild("Humanoid")
            if humanoid and humanoid.Health > 0 then
                if espEnabled then
                    createESP(player)
                    local box = espBoxes[player]
                    local root = player.Character.HumanoidRootPart
                    local pos, onScreen = Camera:WorldToViewportPoint(root.Position)

                    if onScreen then
                        local scale = math.clamp(2000 / (Camera.CFrame.Position - root.Position).Magnitude, 20, 200)
                        local size = Vector2.new(scale * 0.6, scale)
                        local center = Vector2.new(pos.X, pos.Y)

                        box.main.Size = size
                        box.main.Position = center - size/2
                        box.main.Color = (autoTarget == player) and Color3.fromRGB(255, 0, 0) or rainbow(1, 0)
                        box.main.Visible = true

                        box.name.Position = center + Vector2.new(0, -size.Y/2 - 18)
                        box.name.Text = player.Name .. ((autoTarget == player) and " [🔒LOCKED]" or "")
                        box.name.Color = (autoTarget == player) and Color3.fromRGB(255, 0, 0) or rainbow(1, 0.15)
                        box.name.Visible = true

                        if espTraceEnabled then
                            local screenCenter = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
                            box.tracer.From = screenCenter
                            box.tracer.To = center
                            box.tracer.Color = (autoTarget == player) and Color3.fromRGB(255, 0, 0) or rainbow(1, 0.25)
                            box.tracer.Visible = true
                        end
                    else
                        box.main.Visible = false
                        box.name.Visible = false
                        box.tracer.Visible = false
                    end
                else
                    removeESP(player)
                end
            else
                removeESP(player)
            end
        else
            removeESP(player)
        end
    end
end)

Players.PlayerRemoving:Connect(removeESP)

--// ESP UI
ESPTab:CreateSection("[🔍] โซนมองดูคนแบบเส็น/ไม่เส้น [🔍]")

ESPTab:CreateToggle({
    Name = "🔍 เปิดการมองเห็นคน",
    CurrentValue = false,
    Callback = function(val)
        espEnabled = val
        if not val then
            for p,_ in pairs(espBoxes) do removeESP(p) end
        end
    end
})

ESPTab:CreateToggle({
    Name = "🔍 เปิดเส้นดวยการอัตโนมัต",
    CurrentValue = true,
    Callback = function(val)
        espTraceEnabled = val
    end
})

-- แท็บตัวละคร
local MainTab = Window:CreateTab("ตัวละคร", "home")
local MainSection = MainTab:CreateSection("[🛸] โซนบินและปรับความเร็วบิน [🛸]")
 
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local camera = workspace.CurrentCamera
local character = player.Character or player.CharacterAdded:Wait()


UserInputService.InputEnded:Connect(function(input)
	if input.KeyCode == Enum.KeyCode.Space then
		ascend = false
	elseif input.KeyCode == Enum.KeyCode.LeftShift then
		descend = false
	end
end)

-- ตัวแปรระบบ
local Players = game:GetService("Players")
local RS = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")
local humanoid = char:WaitForChild("Humanoid")
 
-- ตัวแปรฟังก์ชัน
local flying = false
local vv, gyro
local flySpeed = 50
local superSpeed = false
local runSpeed = 32
local noclipEnabled = false
local infJumpEnabled = false
 
-- ฟังก์ชันบิน
local function startFlying()
    if flying then return end
    flying = true
    humanoid.PlatformStand = true
 
    vv = Instance.new("BodyVelocity")
    vv.MaxForce = Vector3.new(1e5,1e5,1e5)
    vv.P = 1250
    vv.Velocity = Vector3.zero
    vv.Parent = hrp
 
    gyro = Instance.new("BodyGyro")
    gyro.MaxTorque = Vector3.new(4e5,4e5,4e5)
    gyro.P = 3000
    gyro.CFrame = hrp.CFrame
    gyro.Parent = hrp
 
    Rayfield:Notify({
        Title = "✈️ โหมดบินเปิด!",
        Content = "ใช้ W,A,S,D,Space,Ctrl เพื่อควบคุม",
        Duration = 3,
        Image = 4483362458
    })
end
 
local function stopFlying()
    if not flying then return end
    flying = false
    if vv then vv:Destroy() vv=nil end
    if gyro then gyro:Destroy() gyro=nil end
    humanoid.PlatformStand = false
 
    Rayfield:Notify({
        Title = "🛬 โหมดบินปิด",
        Content = "ลงจอดเรียบร้อย",
        Duration = 3,
        Image = 6026568198
    })
end
 
-- ฟังก์ชันวิ่งเร็ว
local function toggleSpeed(on)
    superSpeed = on
    humanoid.WalkSpeed = superSpeed and runSpeed or 16
    Rayfield:Notify({
        Title = superSpeed and "🏃‍♂️ วิ่งเร็ว ✅" or "🚶‍♂️ วิ่งเร็ว 🛑",
        Content = superSpeed and "วิ่งเร็วสุดขีด!" or "กลับสู่ความเร็วปกติ",
        Duration = 3,
        Image = 4483362458
    })
end
 
-- Toggle & Slider UI
local flyToggle = MainTab:CreateToggle({
    Name="✈️ เปิด/ปิด การบินแบบธรรมดา",
    CurrentValue=false,
    Flag="FlyToggle",
    Callback=function(val)
        if val then startFlying() else stopFlying() end
    end
})
 
local flySlider = MainTab:CreateSlider({
    Name="📏 ความเร็วบิน",
    Range={1,500},
    Increment=1,
    Suffix=" Speed",
    CurrentValue=50,
    Flag="FlySpeed",
    Callback=function(val)
        flySpeed=val
        Rayfield:Notify({
            Title="🚀 ปรับความเร็วบิน",
            Content="ตั้งความเร็วบินเป็น "..val,
            Duration=2,
            Image = 4483362458
        })
    end
})
 
local Section2 = MainTab:CreateSection("[🏃‍♂️] โซนวิ่งเร็วและปรับความเร็ว [🏃‍♂️]")
local speedToggle = MainTab:CreateToggle({
    Name="🏃‍♂️ เปิด/ปิด วิ่งเร็ว",
    CurrentValue=false,
    Flag="SpeedToggle",
    Callback=toggleSpeed
})
 
local speedSlider = MainTab:CreateSlider({
    Name="📏 ความเร็วในการวิ่ง",
    Range={1,500},
    Increment=1,
    Suffix=" Speed",
    CurrentValue=32,
    Flag="RunSpeed",
    Callback=function(val)
        runSpeed=val
        if superSpeed then humanoid.WalkSpeed=runSpeed end
        Rayfield:Notify({
            Title="📏 ปรับความเร็ววิ่ง",
            Content="ตั้งความเร็ววิ่งเป็น "..val,
            Duration=2,
            Image=4483362458
        })
    end
})
 
local Section4 = MainTab:CreateSection("[🧱] โซนล่องหนและทะลุกำแพงและกระโดดไม่จำกัด [🦘]")

--// ตั้งค่าเริ่มต้น
local player = game.Players.LocalPlayer
local defaultSpeed = 16
local boostedSpeed = 48
local invis_on = false
local isSpeedBoosted = false
local key = Enum.KeyCode.X

--// สร้างเสียง
local sound = Instance.new("Sound")
sound.SoundId = "rbxassetid://942127495"
sound.Volume = 1
sound.Parent = player:WaitForChild("PlayerGui")

--// ฟังก์ชันตั้งค่าความโปร่งใส
local function setTransparency(character, transparency)
    for _, part in pairs(character:GetDescendants()) do
        if part:IsA("BasePart") or part:IsA("Decal") then
            part.Transparency = transparency
        end
    end
end

--// ฟังก์ชันล่องหน
local function toggleInvisibility()
    invis_on = not invis_on
    sound:Play()

    if invis_on then
        local character = player.Character or player.CharacterAdded:Wait()
        local root = character:WaitForChild("HumanoidRootPart")
        local savedpos = root.CFrame

        wait()
        root.CFrame = CFrame.new(-25.95, 84, 3537.55)

        wait(0.15)
        local Seat = Instance.new("Seat", workspace)
        Seat.Anchored = false
        Seat.CanCollide = false
        Seat.Name = "invischair"
        Seat.Transparency = 1
        Seat.Position = Vector3.new(-25.95, 84, 3537.55)

        local Weld = Instance.new("Weld", Seat)
        Weld.Part0 = Seat
        Weld.Part1 = character:FindFirstChild("Torso") or character:FindFirstChild("UpperTorso")

        wait()
        Seat.CFrame = savedpos
        setTransparency(character, 0.5)

        game.StarterGui:SetCore("SendNotification", {
            Title = "การล่องหน [ ✅ ]",
            Text = "สถานะ: ล่องหน 👻",
            Duration = 3
        })
    else
        local invisChair = workspace:FindFirstChild("invischair")
        if invisChair then
            invisChair:Destroy()
        end
        setTransparency(player.Character, 0)

        game.StarterGui:SetCore("SendNotification", {
            Title = "การล่องหน [ 🛑 ]",
            Text = "สถานะ: คนเป็นปกติ",
            Duration = 3
        })
    end
end

MainTab:CreateButton({
    Name = "👻 กดปุ่มล่องหน [ กดตัว X ]  [ กดอีกทีเพื่อปิด [ 🛑 ]",
    Callback = function()
        toggleInvisibility()
    end
})

player.CharacterAdded:Connect(function(character)
    isSpeedBoosted = false
    local humanoid = character:WaitForChild("Humanoid")
    humanoid.WalkSpeed = defaultSpeed
end)

--// คีย์ลัดกด X
game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == key then
        toggleInvisibility()
    end
end)

local noclipToggle = MainTab:CreateToggle({
    Name="🧱 เปิด/ปิด Noclip",
    CurrentValue=false,
    Flag="NoclipToggle",
    Callback=function(val)
        noclipEnabled=val
        Rayfield:Notify({
            Title=val and "🧱 Noclip เปิด" or "🛑 Noclip ปิด",
            Content=val and "เดินทะลุวัตถุได้!" or "กลับปกติ",
            Duration=3,
            Image=4483362458
        })
    end
})
 
local infJumpToggle = MainTab:CreateToggle({
    Name="🦘 เปิด/ปิด Infinite Jump",
    CurrentValue=false,
    Flag="InfJumpToggle",
    Callback=function(val)
        infJumpEnabled=val
        Rayfield:Notify({
            Title=val and "🦘 Infinite Jump เปิด" or "🛑 Infinite Jump ปิด",
            Content=val and "กระโดดไม่จำกัด!" or "กลับสู่ปกติ",
            Duration=3,
            Image=4483362458
        })
    end
})

local Section5 = MainTab:CreateSection("[⚔️]  สคริปด้านบนเป็นสคริปที่ทำเองและเป็นสคริปที่โหดมาก  [⚔️]")

local friendTab = Window:CreateTab("วาปไปหาคน", "bone")
local Section = friendTab:CreateSection("[👥]  โซน วาปไปหาเพื่อน      [👥] ")

local function getPlayerList()
    local list = {}
    for _, p in pairs(Players:GetPlayers()) do
        if p ~= player then
            table.insert(list, p.DisplayName.." ("..p.Name..")")
        end
    end
    return list
end
 
local friendDropdown = friendTab:CreateDropdown({
    Name = "👥 เลือกเพื่อน [ ที่เราจะวาป ]",
    Options = getPlayerList(),
    CurrentOption = {},
    Flag = "FriendSelect"
})
 
friendTab:CreateButton({
    Name = "📌 วาปไปหาเพื่อน [ ที่เราเลือกเอาไว้ ]",
    Callback = function()
        local selected = friendDropdown.CurrentOption[1]
        if not selected or selected == "" then
            Rayfield:Notify({
                Title = "❌ Error",
                Content = "กรุณาเลือกเพื่อนก่อน!",
                Duration = 3,
                Image = 4483362458
            })
            return
        end
 
        local friendName = selected:match("%((.-)%)") or selected
 
        if not hrp or not hrp.Parent then
            char = player.Character or player.CharacterAdded:Wait()
            hrp = char:WaitForChild("HumanoidRootPart")
            humanoid = char:WaitForChild("Humanoid")
        end
 
        local targetCFrame = nil
        local targetPlayer = Players:FindFirstChild(friendName)
        if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
            targetCFrame = targetPlayer.Character.HumanoidRootPart.CFrame
        else
            for _, obj in pairs(workspace:GetChildren()) do
                if obj:IsA("Model") and obj.Name:lower() == friendName:lower() then
                    local part = obj:FindFirstChildWhichIsA("BasePart")
                    if part then
                        targetCFrame = part.CFrame
                        break
                    end
                end
            end
        end
 
        if targetCFrame then
            hrp.CFrame = targetCFrame + Vector3.new(0,3,0)
            Rayfield:Notify({
                Title = "✅ วาปไปหาคนนั้น สำเร็จ",
                Content = "คุณได้ไปหา "..friendName,
                Duration = 3,
                Image = 4483362458
            })
        else
            Rayfield:Notify({
                Title = "❌ ไม่พบเป้าหมายที่เราเลือก",
                Content = "เพื่อนไม่ออนไลน์ หรือโมเดลไม่อยู่",
                Duration = 3,
                Image = 4483362458
            })
        end
    end
})
 
friendTab:CreateButton({
    Name = "🔄 รีผู้เล่นที่เราเลือก",
    Callback = function()
        friendDropdown:Set(getPlayerList())
        Rayfield:Notify({
            Title = "🔄 รายชื่ออัปเดตแล้ว [ รีเฟรชที่รายชื่อผูเล่น ]",
            Content = "✅ โหลดรายชื่อผู้เล่นใหม่สำเร็จ!",
            Duration = 3,
            Image = 4483362458
        })
    end
})

local Section3 = friendTab:CreateSection("[🌲]  โซนลากศพใน 99 คืน [ เวลาเพื่อนตาย ]     [🌲]")

-- === ลากศพเฉพาะชื่อ ===
local DragOffset = 5
local DragDelay = 0.2

friendTab:CreateSlider({
    Name = "📏 ปรับระยะห่างการลากศพเพื่อน",
    Range = {1, 15},
    Increment = 1,
    CurrentValue = 5,
    Flag = "DragOffset",
    Callback = function(val) DragOffset = val end
})

friendTab:CreateSlider({
    Name = "📏 ปรับการดีเลย์การลากศพเพื่อน",
    Range = {0.05, 1},
    Increment = 0.05,
    CurrentValue = 0.2,
    Flag = "DragDelay",
    Callback = function(val) DragDelay = val end
})

friendTab:CreateButton({
    Name = "⚔️ ลากศพเพื่อนตามชื่อที่เราเลือก",
    Callback = function()
        local selected = friendDropdown.CurrentOption[1]
        if not selected then
            Rayfield:Notify({Title = "❌ ผิดพลาด", Content = "กรุณาเลือกชื่อก่อน!", Duration = 3})
            return
        end
        local displayName = selected:match("^(.+) %(") or selected

        char = player.Character or player.CharacterAdded:Wait()
        hrp = char:WaitForChild("HumanoidRootPart")

        local itemsFolder = Workspace:WaitForChild("Characters", 10)
        local remoteEvents = ReplicatedStorage:WaitForChild("RemoteEvents", 10)
        if not itemsFolder or not remoteEvents then
            Rayfield:Notify({Title = "❌ ผิดพลาด", Content = "ไม่พบ Characters หรือ RemoteEvents", Duration = 5})
            return
        end

        local startDragging = remoteEvents:WaitForChild("RequestStartDraggingItem", 5)
        local stopDragging = remoteEvents:WaitForChild("StopDraggingItem", 5)
        if not startDragging or not stopDragging then
            Rayfield:Notify({Title = "❌ ผิดพลาด", Content = "ไม่พบ RemoteEvent ลากศพ", Duration = 5})
            return
        end

        local targetName = displayName .. " Body"
        local bodies = {}
        for _, obj in pairs(itemsFolder:GetChildren()) do
            if obj.Name == targetName then
                table.insert(bodies, obj)
            end
        end

        if #bodies == 0 then
            Rayfield:Notify({Title = "ไม่พบศพ", Content = "ไม่มีศพชื่อ \""..targetName.."\"", Duration = 4})
            return
        end

        Rayfield:Notify({Title = "กำลังลากศพ", Content = "พบ "..#bodies.." ตัว", Duration = 3})

        task.spawn(function()
            for i, body in ipairs(bodies) do
                local clone = cloneref and cloneref(body) or body
                startDragging:FireServer(clone)
                task.wait(0.02)
                if body.PrimaryPart then
                    body:PivotTo(hrp.CFrame * CFrame.new(0, 0, -DragOffset))
                end
                task.wait(0.05)
                stopDragging:FireServer(clone)
                task.wait(DragDelay)
            end
            Rayfield:Notify({Title = "สำเร็จ!", Content = "ลากศพทั้งหมด "..#bodies.." ตัว!", Duration = 4})
        end)
    end
})

local Section4 = friendTab:CreateSection("[⚔️]  สคริปด้านบนเป็นสคริปที่ทำเองและเป็นสคริปที่โหดมาก  [⚔️]")

-- แท็บสคริปต์เพิ่มเติม
local extraTab = Window:CreateTab("สคริปต์ 99 คืน", "tree-pine")
local Section1 = extraTab:CreateSection("[ God Mode/Delth Fog [- 99 Night Forest -] ]")

extraTab:CreateButton({
    Name = "[G]  รัน ไม่มีวันตาย      [G]",
    Callback = function()
        Rayfield:Notify({Title = "💖 กำลังโหลด สคริป 💖...", Content = "กรุณารอสักครู่", Duration = 3, Image = 4483362458})
        loadstring(game:HttpGet("https://pastebin.com/raw/9jDt2Ft4"))()
    end
})

-- === ลบหมอกถาวร ===
local OriginalFogEnd = game:GetService("Lighting").FogEnd
local OriginalFogStart = game:GetService("Lighting").FogStart
local FogLoopConnection = nil

local ToggleFog = extraTab:CreateToggle({
    Name = "[D] กด ลบหมอก    [D]",
    CurrentValue = false,
    Flag = "ToggleFog",
    Callback = function(val)
        local Lighting = game:GetService("Lighting")
        if val then
            if OriginalFogEnd == nil then OriginalFogEnd = Lighting.FogEnd end
            if OriginalFogStart == nil then OriginalFogStart = Lighting.FogStart end
            if FogLoopConnection then FogLoopConnection:Disconnect() end
            FogLoopConnection = RS.Heartbeat:Connect(function()
                if not ToggleFog.CurrentValue then return end
                Lighting.FogEnd = 1000
                Lighting.FogStart = 1000
            end)
            Lighting.FogEnd = 1000
            Lighting.FogStart = 1000
            Rayfield:Notify({Title = "ลบหมอก", Content = "หมอกหายถาวร!", Duration = 3})
        else
            if FogLoopConnection then FogLoopConnection:Disconnect() FogLoopConnection = nil end
            Lighting.FogEnd = OriginalFogEnd or 100000
            Lighting.FogStart = OriginalFogStart or 0
            Rayfield:Notify({Title = "ลบหมอก", Content = "หมอกกลับมาแล้ว", Duration = 3})
        end
    end
})

-- รองรับ Load Config
task.spawn(function()
    task.wait(1)
    if ToggleFog.CurrentValue then
        ToggleFog.Callback(true)
    end
end)

local Section2 = extraTab:CreateSection("[ Kill Aura [- 99 Night Forest -] ]")

extraTab:CreateButton({
    Name = "[K]  รัน Kill Aura [ กดตัว Z ]    [K]",
    Callback = function()
        Rayfield:Notify({Title = "⚔️ กำลังโหลด สคริป ⚔️...", Content = "กรุณารอสักครู่", Duration = 3, Image = 4483362458})
        loadstring(game:HttpGet("https://pastebin.com/raw/raXZPKJ7"))()
    end
})

local Section2 = extraTab:CreateSection("[ - 99 Night Forest - ]")

extraTab:CreateButton({
    Name = "[S]  รัน Somtank Hub [ - สคริปแนะนำ - 1 - ]  [S]",
    Callback = function()
        Rayfield:Notify({Title = "💣 กำลังโหลด สคริป 💣...", Content = "กรุณารอสักครู่", Duration = 3, Image = 4483362458})
        loadstring(game:HttpGet('https://raw.githubusercontent.com/MQPS7/99-Night-in-the-Forset/refs/heads/main/99Nightv1'))()
    end
})

extraTab:CreateButton({
    Name = "[F]  รัน FoxName Hub [ - สคริปแนะนำ - 2 - ]  [F]",
    Callback = function()
        Rayfield:Notify({Title = "🦊 กำลังโหลด สคริป 🦊...", Content = "กรุณารอสักครู่", Duration = 3, Image = 4483362458})
        loadstring(game:HttpGet("https://raw.githubusercontent.com/caomod2077/Script/refs/heads/main/FoxnameHub.lua"))()
    end
})

extraTab:CreateButton({
    Name = "[C]  รัน  CPS Hub   [C]",
    Callback = function()
        Rayfield:Notify({Title = "🍊 กำลังโหลด สคริป 🍊...", Content = "กรุณารอสักครู่", Duration = 3, Image = 4483362458})
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Rx1m/CpsHub/refs/heads/main/Hub",true))()
    end
})

extraTab:CreateButton({
    Name = "[E]  รัน Elude Hub  [E]",
    Callback = function()
        Rayfield:Notify({Title = "🍷 กำลังโหลด สคริป 🍷...", Content = "กรุณารอสักครู่", Duration = 3, Image = 4483362458})
        loadstring(game:HttpGet("https://raw.githubusercontent.com/DarkenedEssence/Elude/refs/heads/main/Loader.lua"))()
    end
})

extraTab:CreateButton({
    Name = "[R]  รัน RaBade [ - สคริปแนะนำ - 3 - ]   [R]",
    Callback = function()
        Rayfield:Notify({Title = "🟪 กำลังโหลด สคริป 🟪...", Content = "กรุณารอสักครู่", Duration = 3, Image = 4483362458})
        loadstring(game:HttpGet("https://pastebin.com/raw/RZK9XdtH"))()
    end
})

local mamaTab = Window:CreateTab("สคริปต์รวม", "swords")
local Section0 = mamaTab:CreateSection("[ - สคริปรวมคอมมาน/สคริปวาป - ]")

mamaTab:CreateButton({
    Name = "[I]  รัน Infinite Yield      [I]",
    Callback = function()
        Rayfield:Notify({Title = "♾️ กำลังโหลด สคริป ♾️...", Content = "กรุณารอสักครู่", Duration = 3, Image = 4483362458})
        loadstring(game:HttpGet('https://raw.githubusercontent.com/DarkNetworks/Infinite-Yield/main/latest.lua'))()
    end
})

mamaTab:CreateButton({
   Name = "[T]  รัน Teleport Hub    [T]",
   Callback = function()
       Rayfield:Notify({Title = "📱 กำลังโหลด สคริป 📱...", Content = "กรุณารอสักครู่", Duration = 3, Image = 4483362458})
       loadstring(game:HttpGet("https://pastebin.com/raw/8SzsWBUt"))()
   end,
})

local Section1 = mamaTab:CreateSection("[ - สคริปแปลงร่าง - ]")

mamaTab:CreateButton({
    Name = "[S]  รัน Sandeviston [ - กดตัว F - ]       [S]",
    Callback = function()
        Rayfield:Notify({Title = "👟 กำลังโหลด สคริป 👟...", Content = "กรุณารอสักครู่", Duration = 3, Image = 4483362458})
        loadstring(game:HttpGet("https://pastebin.com/raw/idbiRMZG"))()
    end
})

mamaTab:CreateButton({
    Name = "[W]  รัน Wally West [ - กดตัว Q - ]       [W]",
    Callback = function()
        Rayfield:Notify({Title = "👟 กำลังโหลด สคริป 👟...", Content = "กรุณารอสักครู่", Duration = 3, Image = 4483362458})
        loadstring(game:HttpGet("https://pastebin.com/raw/VDxFA1Ze"))()
    end
})

local Section2 = mamaTab:CreateSection("[ - สคริประยะการโจมตี  -")

mamaTab:CreateButton({
   Name = "[H]  รัน Hitbox [ - 50 - ]    [H]",
   Callback = function()
       Rayfield:Notify({Title = "⚔️ กำลังโหลด สคริป ⚔️...", Content = "กรุณารอสักครู่", Duration = 3, Image = 4483362458})
       loadstring(game:HttpGet("https://pastebin.com/raw/SeUzxcLb"))()
   end,
})

mamaTab:CreateButton({
   Name = "[H]  รัน Hitbox [ - 20 - ]    [H]",
   Callback = function()
       Rayfield:Notify({Title = "⚔️ กำลังโหลด สคริป ⚔️...", Content = "กรุณารอสักครู่", Duration = 3, Image = 4483362458})
       loadstring(game:HttpGet("https://raw.githubusercontent.com/BregUDidp/Banana-Hub/refs/heads/main/Hitbox"))()
   end,
})

mamaTab:CreateButton({
   Name = "[H]  ปิด Hitbox [ - ปิด - ]    [H]",
   Callback = function()
       Rayfield:Notify({Title = "⚔️ กำลังโหลด สคริป ⚔️...", Content = "กรุณารอสักครู่", Duration = 3, Image = 4483362458})
       loadstring(game:HttpGet("https://pastebin.com/raw/RYHm668P"))()
   end,
})

local Section3 = mamaTab:CreateSection("[ - สคริปรวม  -")

mamaTab:CreateButton({
   Name = "[V]  รัน Invincible FlY     [V]",
   Callback = function()
       Rayfield:Notify({Title = "🛸 กำลังโหลด สคริป 🛸...", Content = "กรุณารอสักครู่", Duration = 3, Image = 4483362458})
       loadstring(game:HttpGet("https://raw.githubusercontent.com/396abc/Script/refs/heads/main/FlyR15.lua"))()
   end,
})

mamaTab:CreateButton({
   Name = "[N]  รัน Invisible    [N]",
   Callback = function()
       Rayfield:Notify({Title = "👻 กำลังโหลด สคริป 👻...", Content = "กรุณารอสักครู่", Duration = 3, Image = 4483362458})
       loadstring(game:HttpGet("https://pastebin.com/raw/zY0NHCmB"))()
   end,
})

mamaTab:CreateButton({
   Name = "[F]  รัน Touch Fling     [F]",
   Callback = function()
       Rayfield:Notify({Title = "🌀 กำลังโหลด สคริป 🌀...", Content = "กรุณารอสักครู่", Duration = 3, Image = 4483362458})
       loadstring(game:HttpGet("https://pastefy.app/59mJGQGe/raw"))()
   end,
})

local creditTab = Window:CreateTab("fps/Executer", "square-activity")
local Section1 = creditTab:CreateSection("_______________________________________________________________________________________________________________________________________________________________________")

creditTab:CreateButton({
   Name = "[K]  รัน Kick เพื่อเช็คตัวรัน Xeno     [K]",
   Callback = function()
       game.Players.LocalPlayer:Kick("1️⃣ [ Mesui X On Top ] 1️⃣")
   end,
})

local Section2 = creditTab:CreateSection("_______________________________________________________________________________________________________________________________________________________________________")

creditTab:CreateLabel("fps   | & 57.0 |")
creditTab:CreateLabel("Executer Use / ตัวรันที่ใช้   | .Xeno. |")
creditTab:CreateLabel("แมพที่เขียนสคริปหรือโปร [ - Public Office Simulator - ]")

local Section3 = creditTab:CreateSection("_______________________________________________________________________________________________________________________________________________________________________")

creditTab:CreateLabel(".Executer Computer.  1. Wave 2. Zenith 3. Valex 4. Swift 5. Xeno 6. Solara")

local Section4 = creditTab:CreateSection("_______________________________________________________________________________________________________________________________________________________________________")

creditTab:CreateLabel(".Executer Mobile.  1. Delta 2. Krl 3. Cryptic 4. Evon 5. CodeX 6. Trigon")

local Section5 = creditTab:CreateSection("_______________________________________________________________________________________________________________________________________________________________________")

creditTab:CreateLabel(".Executer Mac.  1. Hydrogen 2. Macsploit 3. Synapse Mac")

local Section6 = creditTab:CreateSection("_______________________________________________________________________________________________________________________________________________________________________")

creditTab:CreateLabel(".Executer Exeternel.  1. Valex 2. DX9 Ware 3. Ronin 4. Serotonin 5. Photon 6. Isabelle 7. Melatonin 8. Assembly 9. Yerba 10. Matrix Hub 11. Matcha")

local Section7 = creditTab:CreateSection("_______________________________________________________________________________________________________________________________________________________________________")

-- อัปเดตลูป
RS.RenderStepped:Connect(function()
    if flying and vv and gyro and hrp and humanoid then
        local cam = workspace.CurrentCamera
        if not cam then return end
 
        local flatForward = Vector3.new(cam.CFrame.LookVector.X,0,cam.CFrame.LookVector.Z)
        local forward = flatForward.Magnitude > 0 and flatForward.Unit or Vector3.zero
        local right = Vector3.new(cam.CFrame.RightVector.X,0,cam.CFrame.RightVector.Z)
        if right.Magnitude > 0 then right = right.Unit end
 
        local moveVec = Vector3.zero
        if UIS:IsKeyDown(Enum.KeyCode.W) then moveVec = moveVec + Vector3.new(0,0,1) end
        if UIS:IsKeyDown(Enum.KeyCode.S) then moveVec = moveVec + Vector3.new(0,0,-1) end
        if UIS:IsKeyDown(Enum.KeyCode.A) then moveVec = moveVec + Vector3.new(-1,0,0) end
        if UIS:IsKeyDown(Enum.KeyCode.D) then moveVec = moveVec + Vector3.new(1,0,0) end
        if UIS:IsKeyDown(Enum.KeyCode.Space) then moveVec = moveVec + Vector3.new(0,1,0) end
        if UIS:IsKeyDown(Enum.KeyCode.LeftControl) then moveVec = moveVec + Vector3.new(0,-1,0) end
 
        local desired = forward*moveVec.Z + right*moveVec.X + Vector3.new(0,moveVec.Y,0)
        if desired.Magnitude>0 then desired = desired.Unit*flySpeed end
        vv.Velocity = desired
 
        if desired.Magnitude>1 then
            local flatDir = Vector3.new(desired.X,0,desired.Z)
            if flatDir.Magnitude>0 then gyro.CFrame = CFrame.new(hrp.Position,hrp.Position+flatDir) end
        end
    end
end)
 
RS.Stepped:Connect(function()
    if noclipEnabled and char then
        for _,part in pairs(char:GetDescendants()) do
            if part:IsA("BasePart") then part.CanCollide=false end
        end
    end
end)
 
UIS.JumpRequest:Connect(function()
    if infJumpEnabled and humanoid then
        humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
    end
end)

UIS.JumpRequest:Connect(function()
    if infJumpEnabled and humanoid then
        humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
    end
end)
 
-- รีเซ็ตตัวละครเมื่อ respawn
player.CharacterAdded:Connect(function(c)
    char=c
    hrp=c:WaitForChild("HumanoidRootPart")
    humanoid=c:WaitForChild("Humanoid")
    stopFlying()
    toggleSpeed(false)
    noclipEnabled=false
  infJumpEnabled=false
    Rayfield:LoadConfiguration()
end)
