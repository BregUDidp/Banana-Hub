--// ============================================== --
--//          AIMBOT + ESP + RAINBOW TOOL HUB      --
--// ============================================== --

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

--// Services
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local Window = Rayfield:CreateWindow({
   Name = "   |   Akari Hub   :(   |",
   Icon = "webhook",
   LoadingTitle = "   Akari Hub  :(   ",

   LoadingSubtitle = "",
   
   ShowText = " üåë ",
   Theme = "Default",
   ToggleUIKeybind = "G",
   DisableRayfieldPrompts = true,
   DisableBuildWarnings = true,
   ConfigurationSaving = {
      Enabled = true,
      FolderName = nil,
      FileName = "Big Hub"
   },
   Discord = {
      Enabled = false,
      Invite = "noinvitelink",
      RememberJoins = true
   },
   KeySystem = false,
   KeySettings = {
      Title = "",
      Subtitle = "",
      Note = "",
      FileName = "",
      SaveKey = true,
      GrabKeyFromSite = false,
      Key = {"üåë"}
   }
})

--// Tabs
local AimbotTab = Window:CreateTab("||   - Aimbot Player - ESP", "locate-fixed")
local RainbowTab = Window:CreateTab("||   - Color Guning", "swords")

--// ============================================== --
--//               AIMBOT SETTINGS                 --
--// ============================================== --

local plrs = game:GetService("Players")
local plr = plrs.LocalPlayer
local cam = workspace.CurrentCamera
local input = game:GetService("UserInputService")
local run = game:GetService("RunService")
local screenSize = cam.ViewportSize

-- Settings
local target = nil
local fovRadius = 120
local showFov = false  -- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏¥‡∏î
local smoothness = 0.12
local prediction = 0.135
local rainbowSpeed = 3
local rainbowHue = 0

-- Drawing Objects
local fovCircle = nil
local lockLine = nil
local targetName = nil
local hpText = nil

-- Rainbow Function
local function getRainbow()
    rainbowHue = (rainbowHue + (rainbowSpeed / 1000)) % 1
    return Color3.fromHSV(rainbowHue, 1, 1)
end

-- Create FOV Circle
local function createFovCircle()
    if fovCircle then fovCircle:Remove() end
    local c = Drawing.new("Circle")
    c.Thickness = 3
    c.Filled = false
    c.Transparency = 1
    c.NumSides = 80
    c.Position = Vector2.new(screenSize.X / 2, screenSize.Y / 2)
    return c
end

-- Create Lock Line
local function createLockLine()
    if lockLine then lockLine:Remove() end
    local l = Drawing.new("Line")
    l.Thickness = 3
    l.Transparency = 1
    return l
end

-- Create Target Name
local function createTargetName()
    if targetName then targetName:Remove() end
    local t = Drawing.new("Text")
    t.Size = 18
    t.Center = true
    t.Outline = true
    t.Font = 2
    return t
end

-- Create HP Text
local function createHpText()
    if hpText then hpText:Remove() end
    local t = Drawing.new("Text")
    t.Size = 16
    t.Center = true
    t.Outline = true
    t.Font = 2
    return t
end

-- Initialize
fovCircle = createFovCircle()
lockLine = createLockLine()
targetName = createTargetName()
hpText = createHpText()

-- Get Closest in FOV
local function GetClosestInFOV()
    local closest = nil
    local dist = math.huge
    local center = Vector2.new(screenSize.X / 2, screenSize.Y / 2)

    for _, v in pairs(plrs:GetPlayers()) do
        if v ~= plr and v.Character and v.Character:FindFirstChild("Head") and v.Character:FindFirstChild("Humanoid") and v.Character.Humanoid.Health > 0 then
            local head = v.Character.Head
            local pos, onScreen = cam:WorldToViewportPoint(head.Position)
            if onScreen then
                local screenPos = Vector2.new(pos.X, pos.Y)
                local mag = (screenPos - center).Magnitude
                if mag <= fovRadius and mag < dist then
                    dist = mag
                    closest = v
                end
            end
        end
    end
    return closest
end

-- Predict Position
local function getPredictedPosition(head)
    local root = head.Parent:FindFirstChild("HumanoidRootPart")
    if root then
        local v = root.Velocity
        local d = (cam.CFrame.Position - head.Position).Magnitude
        return head.Position + (v * d * prediction / 100)
    end
    return head.Position
end

-- Main Loop
run.RenderStepped:Connect(function()
    local rainbow = getRainbow()
    local center = Vector2.new(screenSize.X / 2, screenSize.Y / 2)

    -- FOV Circle + Aimbot Control
    if showFov then
        fovCircle.Position = center
        fovCircle.Radius = fovRadius
        fovCircle.Color = rainbow
        fovCircle.Visible = true

        -- Aimbot ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ FOV ‡πÄ‡∏õ‡∏¥‡∏î
        target = GetClosestInFOV()
        if target and target.Character and target.Character:FindFirstChild("Head") and target.Character:FindFirstChild("Humanoid") then
            local head = target.Character.Head
            local hum = target.Character.Humanoid
            local pred = getPredictedPosition(head)
            local targetCF = CFrame.new(cam.CFrame.Position, pred)
            cam.CFrame = cam.CFrame:Lerp(targetCF, smoothness)

            -- Lock Line
            local headPos = cam:WorldToViewportPoint(pred)
            lockLine.From = center
            lockLine.To = Vector2.new(headPos.X, headPos.Y)
            lockLine.Color = rainbow
            lockLine.Visible = true

            -- Target Name
            targetName.Text = target.DisplayName
            targetName.Position = Vector2.new(headPos.X, headPos.Y - 40)
            targetName.Color = rainbow
            targetName.Visible = true

            -- HP in FOV
            local hpPercent = math.floor((hum.Health / hum.MaxHealth) * 100)
            hpText.Text = hum.Health .. "/" .. hum.MaxHealth .. " (" .. hpPercent .. "%)"
            hpText.Position = center
            hpText.Color = rainbow
            hpText.Visible = true

            fovCircle.Thickness = 4  -- ‡∏´‡∏ô‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡πá‡∏≠‡∏Ñ
        else
            lockLine.Visible = false
            targetName.Visible = false
            hpText.Visible = false
            fovCircle.Thickness = 3
        end
    else
        -- ‡∏õ‡∏¥‡∏î FOV = ‡∏õ‡∏¥‡∏î Aimbot
        fovCircle.Visible = false
        lockLine.Visible = false
        targetName.Visible = false
        hpText.Visible = false
        target = nil
    end
end)

AimbotTab:CreateSection("")

-- GUI: ‡πÉ‡∏ä‡πâ‡∏õ‡∏∏‡πà‡∏° FOV ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î Aimbot
AimbotTab:CreateToggle({
    Name = "[ üéØ ]  Aimbots Player",
    CurrentState = false,
    Callback = function(v) 
        showFov = v
    end
})

AimbotTab:CreateSlider({
    Name = "[ üìè ]  Slider FOV Circle",
    Range = {50, 5000}, Increment = 5, Suffix = " FOV Circle Size", CurrentValue = 120,
    Callback = function(v) fovRadius = v end
})

AimbotTab:CreateSlider({
    Name = "[ üìè ]  Slider Smooth Aimbot",
    Range = {1, 5000}, Increment = 1, Suffix = " Smooth Aimbot", CurrentValue = 30,
    Callback = function(v) smoothness = v / 100 end
})

local Paragraph = AimbotTab:CreateParagraph({Title = "Aimbot Player / Friend Is Rainbow Color", Content = "Aimbot Player / Friend Is Rainbow Color And Style"})

--// ============================================== --
--//                   ESP SYSTEM                  --
--// ============================================== --
local ESP = {
    Enabled = false,
    Tracer = true,
    Boxes = {},
    RainbowSpeed = 1
}

local function Rainbow(t, offset)
    return Color3.fromHSV((tick() * ESP.RainbowSpeed + (offset or 0)) % 1, 1, 1)
end

local function CreateESP(player)
    if ESP.Boxes[player] then return end
    local box = {}
    box.Square = Drawing.new("Square")
    box.Square.Thickness = 2
    box.Square.Filled = false
    box.Square.Visible = false

    box.Name = Drawing.new("Text")
    box.Name.Size = 16
    box.Name.Center = true
    box.Name.Outline = true
    box.Name.Visible = false

    box.Tracer = Drawing.new("Line")
    box.Tracer.Thickness = 2
    box.Tracer.Visible = false

    ESP.Boxes[player] = box
end

local function RemoveESP(player)
    local box = ESP.Boxes[player]
    if box then
        for _, v in pairs(box) do pcall(v.Remove, v) end
        ESP.Boxes[player] = nil
    end
end

--// ESP Loop
RunService.RenderStepped:Connect(function()
    if not ESP.Enabled then
        for p, _ in pairs(ESP.Boxes) do RemoveESP(p) end
        return
    end

    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local hum = player.Character:FindFirstChild("Humanoid")
            if hum and hum.Health > 0 then
                CreateESP(player)
                local box = ESP.Boxes[player]
                local root = player.Character.HumanoidRootPart
                local pos, onScreen = Camera:WorldToViewportPoint(root.Position)

                if onScreen then
                    local scale = math.clamp(2000 / (Camera.CFrame.Position - root.Position).Magnitude, 20, 200)
                    local size = Vector2.new(scale * 0.6, scale)
                    local center = Vector2.new(pos.X, pos.Y)

                    -- Box
                    box.Square.Size = size
                    box.Square.Position = center - size/2
                    box.Square.Color = Rainbow(1, 0)
                    box.Square.Visible = true

                    -- Name
                    box.Name.Position = center + Vector2.new(0, -size.Y/2 - 18)
                    box.Name.Text = player.Name
                    box.Name.Color = Rainbow(1, 0.15)
                    box.Name.Visible = true

                    -- Tracer
                    if ESP.Tracer then
                        local screenCenter = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
                        box.Tracer.From = screenCenter
                        box.Tracer.To = center
                        box.Tracer.Color = Rainbow(1, 0.25)
                        box.Tracer.Visible = true
                    end
                else
                    box.Square.Visible = false
                    box.Name.Visible = false
                    box.Tracer.Visible = false
                end
            else
                RemoveESP(player)
            end
        else
            RemoveESP(player)
        end
    end
end)

Players.PlayerRemoving:Connect(RemoveESP)

--// ============================================== --
--//              RAINBOW GUN SYSTEM               --
--// ============================================== --
local RainbowGun = {
    Enabled = false,
    Current = nil,
    Highlight = nil,
    Hue = 0,
    Connections = {},
    Loop = nil
}

local function CreateHighlight(tool)
    if RainbowGun.Highlight then RainbowGun.Highlight:Destroy() end
    RainbowGun.Highlight = Instance.new("Highlight")
    RainbowGun.Highlight.FillTransparency = 0.3
    RainbowGun.Highlight.OutlineTransparency = 0
    RainbowGun.Highlight.Parent = tool
    RainbowGun.Highlight.Adornee = tool:FindFirstChild("Handle") or tool
end

local function UpdateRainbowGun()
    if not RainbowGun.Enabled or not RainbowGun.Current or not RainbowGun.Highlight then return end
    RainbowGun.Hue = (RainbowGun.Hue + 0.01) % 1
    local color = Color3.fromHSV(RainbowGun.Hue, 1, 1)
    RainbowGun.Highlight.FillColor = color
    RainbowGun.Highlight.OutlineColor = color
    for _, part in pairs(RainbowGun.Current:GetDescendants()) do
        if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
            part.Color = color
        end
    end
end

local function OnEquipped(tool)
    if not RainbowGun.Enabled then return end
    RainbowGun.Current = tool
    task.wait(0.1)
    CreateHighlight(tool)
end

local function OnUnequipped()
    if RainbowGun.Highlight then RainbowGun.Highlight:Destroy() RainbowGun.Highlight = nil end
    RainbowGun.Current = nil
end

local function SetupGun(char)
    for _, c in pairs(RainbowGun.Connections) do c:Disconnect() end
    RainbowGun.Connections = {}

    local function ConnectTool(tool)
        table.insert(RainbowGun.Connections, tool.Equipped:Connect(function() OnEquipped(tool) end))
        table.insert(RainbowGun.Connections, tool.Unequipped:Connect(OnUnequipped))
    end

    for _, child in pairs(char:GetChildren()) do
        if child:IsA("Tool") then ConnectTool(child) end
    end
    table.insert(RainbowGun.Connections, char.ChildAdded:Connect(function(c)
        if c:IsA("Tool") then ConnectTool(c) end
    end))

    local backpack = LocalPlayer:WaitForChild("Backpack")
    for _, child in pairs(backpack:GetChildren()) do
        if child:IsA("Tool") then ConnectTool(child) end
    end
    table.insert(RainbowGun.Connections, backpack.ChildAdded:Connect(function(c)
        if c:IsA("Tool") then ConnectTool(c) end
    end))
end

local function ToggleRainbowGun(state)
    RainbowGun.Enabled = state
    if state then
        Rayfield:Notify({
           Title = "[ ‚úÖ ]  Rainbow Tools On",
           Content = "[ üåà ]  Rainbow Tools Finish",
           Duration = 1,
           Image = "rainbow",
         })
        if not RainbowGun.Loop then
            RainbowGun.Loop = RunService.Heartbeat:Connect(UpdateRainbowGun)
        end
        if LocalPlayer.Character then SetupGun(LocalPlayer.Character) end
    else
        Rayfield:Notify({
           Title = "[ ‚ùå ]  Rainbow Tools Off",
           Content = "[ üåà ]  Rainbow Tools Finish",
           Duration = 1,
           Image = "rainbow",
         })
        if RainbowGun.Loop then RainbowGun.Loop:Disconnect() RainbowGun.Loop = nil end
        if RainbowGun.Highlight then RainbowGun.Highlight:Destroy() RainbowGun.Highlight = nil end
        RainbowGun.Current = nil
    end
end

LocalPlayer.CharacterAdded:Connect(SetupGun)
if LocalPlayer.Character then SetupGun(LocalPlayer.Character) end

Players.PlayerAdded:Connect(function(p)
    if ESPEnabled and p ~= LocalPlayer then
        p.CharacterAdded:Connect(function() createESP(p) end)
    end
end)

Players.PlayerRemoving:Connect(function(p)
    if ESPObjects[p] then
        for _, obj in pairs(ESPObjects[p]) do
            if typeof(obj) == "Instance" and obj.Remove then
                obj:Remove()
            end
        end
        ESPObjects[p] = nil
    end
end)

--// ============================================== --
--//                  GUI CONTROLS                 --
--// ============================================== --

--// ESP Tab (‡πÉ‡∏ä‡πâ AimbotTab ‡∏ï‡πà‡∏≠)
AimbotTab:CreateSection("")

AimbotTab:CreateToggle({
    Name = "[ üîç ]  ESP Player Rainbow  [ - Tracer - ]",
    CurrentValue = false,
    Callback = function(v) ESP.Enabled = v end
})

AimbotTab:CreateToggle({
    Name = "[ üîç ]  Tracer ESP Player Rainbow Automatic",
    CurrentValue = true,
    Callback = function(v) ESP.Tracer = v end
})

local ESPEnabled = false
local Drawings = {}
local Highlights = {}

local RunService = game:GetService("RunService")
local Players = game:GetService("Players")

-- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Drawing ESP ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö player
local function SetupDrawingESP(player)
    if player == Players.LocalPlayer then return end
    
    -- ‡∏•‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
    if Drawings[player] then
        if Drawings[player].Box then Drawings[player].Box:Remove() end
        if Drawings[player].Name then Drawings[player].Name:Remove() end
    end
    
    local Box = Drawing.new("Square")
    Box.Thickness = 2
    Box.Filled = false
    Box.Color = Color3.fromRGB(138, 43, 179)
    Box.Visible = false

    local Name = Drawing.new("Text")
    Name.Size = 16
    Name.Center = true
    Name.Outline = true
    Name.Color = Color3.fromRGB(138, 43, 179)
    Name.Visible = false

    Drawings[player] = {Box = Box, Name = Name}
end

-- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Highlight ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö player
local function SetupHighlight(player)
    if player == Players.LocalPlayer then return end
    
    -- ‡∏•‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
    if Highlights[player] then
        if Highlights[player] and Highlights[player].Parent then
            Highlights[player]:Destroy()
        end
    end
    
    local character = player.Character
    if character then
        local highlight = Instance.new("Highlight")
        highlight.Parent = character
        highlight.FillColor = Color3.fromRGB(138, 43, 179)
        highlight.OutlineColor = Color3.fromRGB(138, 43, 179)
        highlight.FillTransparency = 0.4
        highlight.OutlineTransparency = 0
        highlight.Enabled = ESPEnabled  -- ‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ñ‡πâ‡∏≤ ESP ‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà
        
        Highlights[player] = highlight
    end
end

-- ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Drawing ESP ‡∏ó‡∏∏‡∏Å‡πÄ‡∏ü‡∏£‡∏°
local function UpdateESP()
    if not ESPEnabled then return end
    
    for player, draws in pairs(Drawings) do
        local character = player.Character
        if character and character:FindFirstChild("HumanoidRootPart") and character:FindFirstChild("Head") and character:FindFirstChild("Humanoid") then
            local root = character.HumanoidRootPart
            local head = character.Head
            local humanoid = character.Humanoid
            
            if humanoid.Health <= 0 then
                draws.Box.Visible = false
                draws.Name.Visible = false
                continue
            end

            local screenPos, onScreen = workspace.CurrentCamera:WorldToViewportPoint(root.Position)
            
            if onScreen then

                -- ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏ô‡∏≤‡∏î Box (‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô)
                local topPos = workspace.CurrentCamera:WorldToViewportPoint(head.Position + Vector3.new(0, 3, 0))
                local bottomPos = workspace.CurrentCamera:WorldToViewportPoint(root.Position - Vector3.new(0, 3, 0))
                local sizeY = math.abs(topPos.Y - bottomPos.Y)
                local sizeX = sizeY * 0.8

                draws.Box.Size = Vector2.new(sizeX, sizeY)
                draws.Box.Position = Vector2.new(screenPos.X - sizeX / 2, screenPos.Y - sizeY / 2)
                draws.Box.Visible = true

                -- ‡∏ä‡∏∑‡πà‡∏≠ + ‡πÄ‡∏•‡∏∑‡∏≠‡∏î
                draws.Name.Text = player.Name .. " [ " .. math.floor(humanoid.Health) .. " ]"
                draws.Name.Position = Vector2.new(screenPos.X, screenPos.Y - sizeY / 2 - 20)
                draws.Name.Visible = true
            else
                draws.Box.Visible = false
                draws.Name.Visible = false
            end
        else
            draws.Box.Visible = false
            draws.Name.Visible = false
        end
    end
end

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡πà‡∏≠ character ‡πÇ‡∏´‡∏•‡∏î
local function OnCharacterAdded(player)
    if player == Players.LocalPlayer then return end
    
    -- ‡∏£‡∏≠‡πÉ‡∏´‡πâ character ‡πÇ‡∏´‡∏•‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç
    local character = player.Character or player.CharacterAdded:Wait()
    character:WaitForChild("HumanoidRootPart")
    character:WaitForChild("Head")
    character:WaitForChild("Humanoid")
    
    SetupDrawingESP(player)
    SetupHighlight(player)
end

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î ESP
local function EnableESP()
    -- ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
    for _, player in pairs(Players:GetPlayers()) do
        if player.Character then
            OnCharacterAdded(player)
        end
        player.CharacterAdded:Connect(function()
            OnCharacterAdded(player)
        end)
    end
    
    -- ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤
    Players.PlayerAdded:Connect(function(player)
        player.CharacterAdded:Connect(function()
            OnCharacterAdded(player)
        end)
    end)
end

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏¥‡∏î ESP
local function DisableESP()
    -- ‡∏•‡∏ö Drawing ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    for player, draws in pairs(Drawings) do
        if draws.Box then draws.Box:Remove() end
        if draws.Name then draws.Name:Remove() end
    end
    Drawings = {}
    
    -- ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡∏∞‡∏•‡∏ö Highlight ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    for player, highlight in pairs(Highlights) do
        if highlight and highlight.Parent then
            highlight.Enabled = false
            highlight:Destroy()
        end
    end
    Highlights = {}
end

-- Toggle ‡∏´‡∏•‡∏±‡∏Å
AimbotTab:CreateToggle({
    Name = "[ üîç ]  ESP Player Purple  [ 138, 43, 179 ]",
    CurrentValue = false,
    Callback = function(Value)
        ESPEnabled = Value

        if Value then
            EnableESP()
        else
            DisableESP()
        end
    end,
})

local Paragraph = AimbotTab:CreateParagraph({Title = "ESP Player / Friend Tracer Is Automatic", Content = "ESP Player / Friend Tracer Is Automatic Style"})

--// Rainbow Gun Tab
RainbowTab:CreateSection("")

local PurpleTool = {
    Enabled = false,
    Current = nil,
    Highlight = nil,
    Connections = {},
}

-- ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (138, 43, 179)
local PURPLE_COLOR = Color3.fromRGB(138, 43, 179)

local function CreateHighlight(tool)
    if PurpleTool.Highlight then PurpleTool.Highlight:Destroy() end
    PurpleTool.Highlight = Instance.new("Highlight")
    PurpleTool.Highlight.FillColor = PURPLE_COLOR
    PurpleTool.Highlight.OutlineColor = PURPLE_COLOR
    PurpleTool.Highlight.FillTransparency = 0.3
    PurpleTool.Highlight.OutlineTransparency = 0
    PurpleTool.Highlight.Parent = tool
    PurpleTool.Highlight.Adornee = tool:FindFirstChild("Handle") or tool
end

local function ApplyPurpleColor()
    if not PurpleTool.Enabled or not PurpleTool.Current or not PurpleTool.Highlight then return end
    
    -- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏µ Highlight
    PurpleTool.Highlight.FillColor = PURPLE_COLOR
    PurpleTool.Highlight.OutlineColor = PURPLE_COLOR
    
    -- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ó‡∏∏‡∏Å Part ‡πÉ‡∏ô Tool (‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô HumanoidRootPart)
    for _, part in pairs(PurpleTool.Current:GetDescendants()) do
        if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
            part.Color = PURPLE_COLOR
        end
    end
end

local function OnEquipped(tool)
    if not PurpleTool.Enabled then return end
    PurpleTool.Current = tool
    task.wait(0.1)
    CreateHighlight(tool)
    ApplyPurpleColor()  -- ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
end

local function OnUnequipped()
    if PurpleTool.Highlight then 
        PurpleTool.Highlight:Destroy() 
        PurpleTool.Highlight = nil 
    end
    PurpleTool.Current = nil
end

local function SetupTool(char)
    -- ‡∏•‡πâ‡∏≤‡∏á connection ‡πÄ‡∏Å‡πà‡∏≤
    for _, c in pairs(PurpleTool.Connections) do c:Disconnect() end
    PurpleTool.Connections = {}

    local function ConnectTool(tool)
        table.insert(PurpleTool.Connections, tool.Equipped:Connect(function() OnEquipped(tool) end))
        table.insert(PurpleTool.Connections, tool.Unequipped:Connect(OnUnequipped))
    end

    -- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° Tool ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ
    for _, child in pairs(char:GetChildren()) do
        if child:IsA("Tool") then ConnectTool(child) end
    end
    table.insert(PurpleTool.Connections, char.ChildAdded:Connect(function(c)
        if c:IsA("Tool") then ConnectTool(c) end
    end))

    -- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° Tool ‡πÉ‡∏ô Backpack
    local backpack = LocalPlayer:WaitForChild("Backpack")
    for _, child in pairs(backpack:GetChildren()) do
        if child:IsA("Tool") then ConnectTool(child) end
    end
    table.insert(PurpleTool.Connections, backpack.ChildAdded:Connect(function(c)
        if c:IsA("Tool") then ConnectTool(c) end
    end))
end

local function TogglePurpleTool(state)
    PurpleTool.Enabled = state
    if state then
        Rayfield:Notify({
           Title = "[ ‚úÖ ]  Purple Tools On",
           Content = "[ üü™ ]  Purple Tools Finish",
           Duration = 1,
           Image = "grape",
         })
        if LocalPlayer.Character then SetupTool(LocalPlayer.Character) end
    else
        Rayfield:Notify({
           Title = "[ ‚ùå ] Purple Tools Off",
           Content = "[ üü™ ] Purple Tools Finish",
           Duration = 1,
           Image = "grape",
         })
        if PurpleTool.Highlight then 
            PurpleTool.Highlight:Destroy() 
            PurpleTool.Highlight = nil 
        end
        PurpleTool.Current = nil
    end
end

-- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏´‡∏°‡πà
LocalPlayer.CharacterAdded:Connect(SetupTool)
if LocalPlayer.Character then SetupTool(LocalPlayer.Character) end

-- Toggle ‡πÉ‡∏ô UI (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö‡∏ò‡∏µ‡∏°‡∏°‡πà‡∏ß‡∏á)
RainbowTab:CreateToggle({
    Name = "[ üü™ ]  Purple Glowing Tool  [ - Permanent Purple - ]",
    CurrentValue = false,
    Callback = function(v) 
        TogglePurpleTool(v) 
    end
})

RainbowTab:CreateToggle({
    Name = "[ üåà ]  Rainbow Mountain Tool  [ - Permanent Rainbow - ]",
    CurrentValue = false,
    Callback = function(v) ToggleRainbowGun(v) end
})

local Paragraph = RainbowTab:CreateParagraph({Title = "Rainbow Tool For Cool Style", Content = "Rainbow Tool Is Good For Style Gun / Sword"})
